# VideoSDK Room Switcher - Full Stack Application
# Note: Most of the code is generated by AI, I just added the logic to make it work.
A complete full-stack solution for seamless video room switching with VideoSDK, featuring Express backend and React frontend.

![Full Stack](https://img.shields.io/badge/Full%20Stack-React%20%2B%20Express-blue)
![VideoSDK](https://img.shields.io/badge/VideoSDK-Integrated-00d9ff)
![Backend](https://img.shields.io/badge/Backend-Express-green)

## ğŸŒŸ Features

### Backend (Express + Node.js)
- âœ… **JWT Token Generation** - Secure VideoSDK token creation
- âœ… **Room Management** - Create, join, leave rooms
- âœ… **Participant Tracking** - Real-time participant management
- âœ… **Media Relay API** - Backend-coordinated relay switching
- âœ… **RESTful API** - Complete REST API with proper endpoints
- âœ… **Statistics** - Live statistics and monitoring
- âœ… **CORS Enabled** - Secure cross-origin requests

### Frontend (React + VideoSDK)
- âœ… **Backend Integration** - Complete API integration
- âœ… **Normal Room Switching** - Backend-coordinated transitions
- âœ… **Media Relay** - Server-managed relay connections
- âœ… **Live Statistics** - Real-time participant counts
- âœ… **Backend Status** - Connection monitoring
- âœ… **Modern UI** - Cyberpunk-inspired design
- âœ… **Responsive** - Works on all devices

## ğŸ—ï¸ Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Frontend (React)                     â”‚
â”‚  - VideoSDK Integration                                  â”‚
â”‚  - Room Management UI                                    â”‚
â”‚  - Real-time Video Calls                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â”‚ HTTP/REST API
                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Backend (Express)                      â”‚
â”‚  - Token Generation (JWT)                                â”‚
â”‚  - Room Management                                       â”‚
â”‚  - Participant Tracking                                  â”‚
â”‚  - Media Relay Coordination                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â”‚ VideoSDK API
                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  VideoSDK Services                       â”‚
â”‚  - WebRTC Infrastructure                                 â”‚
â”‚  - Media Servers                                         â”‚
â”‚  - TURN/STUN Servers                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ Project Structure

```
fullstack-videosdk/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ server.js           # Express server with all endpoints
â”‚   â”œâ”€â”€ package.json        # Backend dependencies
â”‚   â”œâ”€â”€ .env                # Backend configuration
â”‚   â””â”€â”€ README.md           # Backend documentation
â”‚
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ App.jsx         # Main React component
â”‚   â”‚   â”œâ”€â”€ App.css         # Styles
â”‚   â”‚   â”œâ”€â”€ api.js          # API service layer
â”‚   â”‚   â””â”€â”€ index.js        # React entry point
â”‚   â”œâ”€â”€ public/
â”‚   â”‚   â””â”€â”€ index.html      # HTML template
â”‚   â”œâ”€â”€ package.json        # Frontend dependencies
â”‚   â”œâ”€â”€ .env                # Frontend configuration
â”‚   â””â”€â”€ README.md           # Frontend documentation
â”‚
â””â”€â”€ README.md               # This file
```

## ğŸš€ Quick Start

### Prerequisites
- Node.js v14+ and npm
- Your VideoSDK credentials (already configured)

### Step 1: Install Dependencies

```bash
# Install backend dependencies
cd backend
npm install

# Install frontend dependencies (in a new terminal)
cd frontend
npm install
```

### Step 2: Start Backend Server

```bash
cd backend
npm start
```

You should see:
```
ğŸš€ VideoSDK Room Switcher Backend Server
âœ… Server running on port 5000
ğŸ“¡ API endpoint: http://localhost:5000/api
```

### Step 3: Start Frontend Application

```bash
# In a new terminal
cd frontend
npm start
```

The app will open at `http://localhost:3000`

## ğŸ”§ Configuration

### Backend Configuration (.env)

```env
VIDEOSDK_API_KEY=17a14191-3124-4e88-8414-5f8e9b3c5708
VIDEOSDK_SECRET_KEY=361dbb43f1d0b1b2e992a817d4b23b40a10118bb04314033f7ec6d48d4d8cb58
PORT=5000
FRONTEND_URL=http://localhost:3000
```

### Frontend Configuration (.env)

```env
REACT_APP_API_URL=http://localhost:5000/api
REACT_APP_ROOM_A_ID=room-a-demo
REACT_APP_ROOM_B_ID=room-b-demo
```

## ğŸ“¡ API Endpoints

### Token Management

#### Generate Token
```http
POST /api/token/generate
Content-Type: application/json

{
  "roomId": "room-a-demo",
  "participantId": "participant-123",
  "expiresIn": 86400
}
```

### Room Management

#### Get All Rooms
```http
GET /api/rooms
```

#### Get Room Details
```http
GET /api/rooms/:roomId
```

#### Create Room
```http
POST /api/rooms/create
Content-Type: application/json

{
  "name": "New Room",
  "roomId": "room-custom-id"
}
```

#### Join Room
```http
POST /api/rooms/:roomId/join
Content-Type: application/json

{
  "participantId": "participant-123",
  "participantName": "John Doe"
}
```

#### Leave Room
```http
POST /api/rooms/:roomId/leave
Content-Type: application/json

{
  "participantId": "participant-123"
}
```

#### Switch Rooms
```http
POST /api/rooms/switch
Content-Type: application/json

{
  "participantId": "participant-123",
  "fromRoomId": "room-a-demo",
  "toRoomId": "room-b-demo",
  "method": "normal"
}
```

### Media Relay

#### Start Relay
```http
POST /api/relay/start
Content-Type: application/json

{
  "participantId": "participant-123",
  "sourceRoomId": "room-a-demo",
  "targetRoomId": "room-b-demo"
}
```

#### Stop Relay
```http
POST /api/relay/stop
Content-Type: application/json

{
  "participantId": "participant-123"
}
```

#### Get Active Relays
```http
GET /api/relay/active
```

### Statistics

#### Get Stats
```http
GET /api/stats
```

## ğŸ¯ How It Works

### Normal Room Switching

1. **Frontend** requests room switch via API
2. **Backend** validates and coordinates the switch
3. **Backend** generates new token for target room
4. **Frontend** receives new token
5. **Frontend** leaves current meeting
6. **Frontend** joins new meeting with new token
7. **Backend** updates participant tracking

### Media Relay Switching

1. **Frontend** requests relay start via API
2. **Backend** creates relay connection record
3. **Backend** tracks participant in both rooms
4. **Frontend** maintains media streams
5. **Backend** coordinates relay state
6. **Frontend** displays relay indicator

## ğŸ” Testing the Application

### Single User Test
1. Start backend: `cd backend && npm start`
2. Start frontend: `cd frontend && npm start`
3. Join Room A
4. Enable camera/microphone
5. Test normal switching
6. Test relay switching

### Multi-User Test
1. Open multiple browser tabs to `http://localhost:3000`
2. Join same room from different tabs
3. Test switching from one tab
4. Observe from other tabs

### Backend Test
```bash
# Test health endpoint
curl http://localhost:5000/api/health

# Test room listing
curl http://localhost:5000/api/rooms

# Test statistics
curl http://localhost:5000/api/stats
```

## ğŸ“Š Monitoring & Statistics

The application provides real-time statistics:
- Total rooms
- Active participants
- Active relays
- Per-room participant counts

Access via:
- Frontend UI (Welcome screen)
- API: `GET /api/stats`

## ğŸ” Security Considerations

### Development
- âœ… Tokens generated server-side
- âœ… CORS configured
- âœ… Environment variables for secrets
- âœ… JWT with expiration

### Production Checklist
- [ ] Use HTTPS
- [ ] Implement rate limiting
- [ ] Add authentication/authorization
- [ ] Use database instead of in-memory storage
- [ ] Add input validation
- [ ] Implement logging
- [ ] Set up monitoring
- [ ] Use environment-specific configs

## ğŸš§ Known Limitations

1. **In-Memory Storage**: Backend uses in-memory storage. In production, use a database (MongoDB, PostgreSQL, Redis)

2. **Media Relay**: Current implementation tracks relay state but doesn't actually forward media streams. Full implementation requires:
   - Custom media server
   - SFU modifications
   - WebRTC signaling server

3. **Scalability**: Not optimized for production scale. Consider:
   - Load balancing
   - Session management
   - Distributed state

4. **No Authentication**: No user authentication. Add:
   - User login/signup
   - JWT authentication
   - Role-based access control

## ğŸ› Troubleshooting

### Backend won't start
```bash
# Check if port 5000 is in use
lsof -i :5000

# Kill process if needed
kill -9 <PID>

# Or use different port
PORT=5001 npm start
```

### Frontend shows "Backend disconnected"
1. Ensure backend is running on port 5000
2. Check backend console for errors
3. Verify CORS settings
4. Test: `curl http://localhost:5000/api/health`

### Token errors
1. Verify API credentials in backend .env
2. Check token expiration
3. Ensure VideoSDK API is accessible

### CORS errors
1. Verify FRONTEND_URL in backend .env
2. Check browser console
3. Ensure both apps running on correct ports

## ğŸ“š Further Reading

- [VideoSDK Documentation](https://docs.videosdk.live/)
- [Express.js Guide](https://expressjs.com/)
- [React Documentation](https://react.dev/)
- [JWT Best Practices](https://jwt.io/introduction)

## ğŸ“ Next Steps

1. **Add Database**: Replace in-memory storage with MongoDB/PostgreSQL
2. **Implement Auth**: Add user authentication
3. **Deploy**: Deploy to production (Heroku, AWS, DigitalOcean)
4. **Add Features**:
   - Screen sharing
   - Recording
   - Chat
   - Reactions
   - Breakout rooms
5. **Monitoring**: Add logging and monitoring (Winston, Sentry)

## ğŸ“ Development Scripts

### Backend
```bash
npm start       # Start server
npm run dev     # Start with nodemon (auto-reload)
```

### Frontend
```bash
npm start       # Start development server
npm run build   # Build for production
npm test        # Run tests
```

## ğŸ¤ Contributing

This is a demonstration project. Feel free to:
- Fork and modify
- Add features
- Improve implementation
- Share feedback

## ğŸ“„ License

MIT License - Feel free to use this project as a template for your applications.

---

**Built with â¤ï¸ using VideoSDK, React, and Express**

ğŸ¥ Full-Stack Video Conferencing Made Easy ğŸ¥
